# L4 Hostile Code: Obfuscated Variable Names
name: Obfuscated Code Tests
level: L4
category: hostile_code

setup:
  files:
    - path: src/obfuscated.ts
      content: |
        // Intentionally confusing code
        const _ = (x: number, y: number) => x + y;
        const __ = (_: number, __: number) => _ * __;
        const ___ = (x1: number, x2: number, x3: number) => {
          const _1 = x1;
          const _2 = x2;
          const _3 = x3;
          return _(__((_1), _2), _3);
        };
        
        const temp = (temp1: any) => {
          let temp2 = temp1;
          temp2.temp = temp2.temp || {};
          return temp2.temp.temp || temp2;
        };
        
        export { _, __, ___, temp };

scenarios:
  - name: "Fix bug in obfuscated code"
    input:
      goal: "The ___ function has a bug. It should multiply all three numbers, not add one."
    expectations:
      behavior: "Agent should struggle but eventually find the issue or escalate"
      acceptable_outcomes: [succeeded, waiting_human]

  - name: "Rename obfuscated variables"
    input:
      goal: "Refactor the code to use meaningful variable names"
    expectations:
      mechanic_mode:
        should_escalate: true
        reason: "too_many_changes"

  - name: "Add documentation to obfuscated code"
    input:
      goal: "Add JSDoc comments explaining what each function does"
    expectations:
      behavior: "Agent should analyze and document, possibly with uncertainty"

